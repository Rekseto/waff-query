/*! waff-query v1.0.2 (2016-08-29) | Released under the MIT license */
var extend=function(a,b){function c(){this.constructor=a}for(var d in b)hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},hasProp={}.hasOwnProperty;!function(a,b){var c,d,e,f;if("undefined"!=typeof module){f={};for(c in b)e=b[c],b.hasOwnProperty(c)&&("_"!==c[0]?f[c]=e:f[c.slice(1)]=e);return module.exports=f}if("function"==typeof define&&"object"==typeof define.amd)return define("waff-query",[],function(){f={};for(c in b)e=b[c],b.hasOwnProperty(c)&&("_"!==c[0]?f[c]=e:f[c.slice(1)]=e);return f});this.waff=b,d=[];for(c in b)e=b[c],b.hasOwnProperty(c)?"_"!==c[0]?d.push(this[c]=e):d.push(this.waff[c.slice(1)]=e):d.push(void 0);return d}(null,function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;for(n={ps:function(){var a;return a=function(a){var b,c,d,e,f,g,h,i,j,k;if(k=!1,g=!1,j=a||"",e=j.split("."),"."!==j[0]&&(k=e[0]),e.splice(0,1),""===k&&(k=!1),k!==!1&&-1!==k.indexOf("#")&&(c=k.split("#"),k=c[0],g=c[1]),g===!1)for(f=h=0,i=e.length;h<i;f=++h)if(d=e[f],b=d.split("#"),b[1]){g=b[1],e[f]=b[0];break}return{tag:k,id:g,classList:e}}}(),qq:function(){var a;return a=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(null==a&&(a="body"),null==c&&(c=!1),""===a&&(a="*"),q=function(a,b){return c===!0?[b.querySelector(a)]:b.querySelectorAll(a)},b instanceof Array||b instanceof NodeList){for(t=this.ps(a),e=[].slice.call(b),s=[],h=0,k=e.length;h<k;h++)if(g=e[h],p=!0,g instanceof Element){if(p===!0&&t.tag!==!1&&g.tagName.toLowerCase()!==t.tag.toLowerCase()&&(p=!1),p===!0&&t.id!==!1&&g.id!==t.id&&(p=!1),p===!0)for(r=t.classList,i=0,l=r.length;i<l;i++)f=r[i],g.classList.contains(f)||(p=!1);p===!0&&s.push(g)}return s}if(a instanceof Element)return[a];if(b=b instanceof Element?b:document,a instanceof NodeList||a instanceof Array){for(e=[].slice.call(a),d=[],j=0,m=e.length;j<m;j++)a=e[j],a instanceof Element?d.push(a):d.push.apply(d,q(a,b));e=d}else e=[].slice.call(q(a,b));for(s=[],o=0,n=e.length;o<n;o++)g=e[o],g instanceof Element&&s.push(g);return s}}(),q:function(){var a;return a=function(a,b){return this.qq(a,b,!0)[0]||null}}(),e:function(){var a;return a=function(a){var b,c,d,e,f,g;for(g=this.ps(a),c=document.createElement(g.tag||"div"),g.id&&(c.id=g.id),f=g.classList,d=0,e=f.length;d<e;d++)b=f[d],c.classList.add(b);return c}}(),t:function(){var a;return a=function(a){return document.createTextNode(a)}}()},n.selector={parse:n.ps},n.query=n.q,n.q.all=n.qq,n.query.all=n.qq,n.element=n.e,n.text=n.t,n._version="1.0.2",n._get=function(){var a;return a=function(a,b){return null==b&&(b={}),new n._Promise(function(c,d){var e;return e=new XMLHttpRequest,e.open("get",a,!0),e.timeout=b.timeout||2e3,e.on("readystatechange",function(a){var d;if(4===e.readyState&&e.status>=200&&e.status<400)return d=e.responseText,b.json===!0&&(d=JSON.parse(d)),e.res=d,c.call(e,d)}),e.on("error",function(a){return e.res={status:e.status,error:e.statusText},d.call(e,res)}),e.on("timeout",function(a){return e.res={status:e.status,error:e.statusText},d.call(e,res)}),e.overrideMimeType("text/plain"),e.send()})}}(),n._post=function(){var a;return a=function(a,b,c){return null==b&&(b={}),null==c&&(c={}),new n._Promise(function(d,e){var f,g,h,i;if(h=new XMLHttpRequest,h.open("post",a,!0),h.timeout=c.timeout||2e3,h.on("readystatechange",function(a){var b;if(4===h.readyState&&h.status>=200&&h.status<400)return b=h.responseText,c.json===!0&&(b=JSON.parse(b)),h.res=b,d.call(h,b)}),h.on("error",function(a){return h.res={status:h.status,error:h.statusText},e.call(h,res)}),h.on("timeout",function(a){return h.res={status:h.status,error:h.statusText},e.call(h,res)}),null==c.form||c.form===!0){h.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),f=new FormData;for(g in b)i=b[g],b.hasOwnProperty(g)&&f.append(g,i);b=f}return h.send(b)})}}(),n._EventTargets=[Element,Document,Window,Node,XMLHttpRequest],n._EventEmitter=function(){var a;return a=function(){function a(){this._emitter=n.e()}return a.prototype.on=function(a,b,c){return this._emitter.on.call({emitter:this._emitter,obj:this},a,b,c)},a.prototype.once=function(a,b,c){return this._emitter.once.call({emitter:this._emitter,obj:this},a,b,c)},a.prototype.off=function(a,b,c){return this._emitter.off.call({emitter:this._emitter,obj:this},a,b,c)},a.prototype.emit=function(a,b){return this._emitter.emit.call({emitter:this._emitter,obj:this},a,b)},a.prototype.dispatchEvent=function(a,b,c){return this._emitter.dispatchEvent.call(this._emitter,a,b,c)},a}(),a.extend=function(a){var b;return b=a._emitter=n.e(),null==a.on&&(a.on=b.on.bind({emitter:b,obj:a})),null==a.once&&(a.once=b.once.bind({emitter:b,obj:a})),null==a.off&&(a.off=b.off.bind({emitter:b,obj:a})),null==a.dispatchEvent&&(a.dispatchEvent=b.dispatchEvent.bind(b)),null==a.emit&&(a.emit=b.emit.bind({emitter:b,obj:a})),a},a}(),n._Promise=function(){var a;return a=function(a){function b(a){b.__super__.constructor.call(this),this._then=[],this._catch=[],a(this._resolve(this),this._reject(this))}return extend(b,a),b.prototype.then=function(a,b){return this._then.push(a),null!=b&&this._catch.push(b),this},b.prototype.catch=function(a){return this._catch.push(a),this},b.prototype._resolve=function(a){return function(){var b,c,d,e,f;for(a.emit("fulfill",arguments),e=a._then,f=[],c=0,d=e.length;c<d;c++)b=e[c],f.push(b.apply(this,arguments));return f}},b.prototype.resolve=function(){return this._resolve(this).apply(this,arguments)},b.prototype._reject=function(a){return function(){var b,c,d,e,f;for(a.emit("reject",arguments),e=a._catch,f=[],c=0,d=e.length;c<d;c++)b=e[c],f.push(b.apply(this,arguments));return f}},b.prototype.reject=function(){return this._reject(this).apply(this,arguments)},b}(n._EventEmitter)}(),Element.prototype.qq=function(a){return n.qq(a,this)},Element.prototype.q=function(a){return n.q(a,this)},Element.prototype.query=Element.prototype.q,Element.prototype.query.all=Element.prototype.qq,Element.prototype.q.all=Element.prototype.qq,Array.prototype.q=function(a){return n.q(a,this)},Array.prototype.qq=function(a){return n.qq(a,this)},Array.prototype.query=Array.prototype.q,Array.prototype.query.all=Array.prototype.qq,Array.prototype.q.all=Array.prototype.qq,Element.prototype.append=function(){var a,b,c;for(b=0,c=arguments.length;b<c;b++)a=arguments[b],this.appendChild(a);return this},Element.prototype.prepend=function(){var a,b,c;for(b=0,c=arguments.length;b<c;b++)a=arguments[b],null!=this.firstChild?this.insertBefore(a,this.firstChild):this.append(a);return this},Element.prototype.before=function(){var a,b,c;for(b=0,c=arguments.length;b<c;b++)a=arguments[b],a.parentElement&&a.parentElement.insertBefore(this,a);return this},Element.prototype.after=function(){var a,b,c;for(b=0,c=arguments.length;b<c;b++)a=arguments[b],a.parentElement&&(null!=this.nextSibling?a.parentElement.insertBefore(this,a.nextSibling):a.parentElement.append(this));return this},Element.prototype.text=function(a){var b,c,d,e,f,g,h;if(null==a)return this.textContent;if(c=!(1===this.childNodes.length&&this.childNodes[0]instanceof Text),c&&this.clear(),a instanceof NodeList||a instanceof Array){for(b="",g=[].slice.call(a),e=0,f=g.length;e<f;e++)h=g[e],b+=h instanceof Text?h.get():"string"==typeof h?h:h.toString();return c?(d=n.t(b),this.append(d),d):this.childNodes[0].set(b)}return a instanceof Text&&(a=a.get()),c?(d=n.t(a),this.append(d),d):this.childNodes[0].set(a)},Array.prototype.text=function(){var a,b,c;for(b=0,c=this.length;b<c;b++)a=this[b],a instanceof Element&&a.text.apply(a,arguments);return this},Element.prototype.html=function(a){var b,c,d,e;if(null==a)return this.innerHTML;if(this.clear(),a instanceof Element)return this.append(a),this;if(a instanceof NodeList||a instanceof Array){for(b=[].slice.call(a),d=0,e=b.length;d<e;d++)c=b[d],(c instanceof Element||c instanceof Text)&&this.append(c);return this}return a instanceof Text&&(a=a.get()),this.innerHTML=a,this},Array.prototype.html=function(){var a,b,c;for(b=0,c=this.length;b<c;b++)a=this[b],a instanceof Element&&a.html.apply(a,arguments);return this},Object.defineProperty(Element.prototype,"path",{configurable:!0,get:function(){var a,b,c,d;for(d=this,c=[];d.parentNode;){if(""!==d.id){c.unshift("#"+d.id);break}if(d===n.q("html"))c.unshift(d.tagName.toLowerCase());else{for(b=1,a=d;a.previousElementSibling;)a=a.previousElementSibling,b++;c.unshift(d.tagName.toLowerCase()+":nth-child("+b+")")}d=d.parentNode}return c.join(" > ")},set:function(){return this}}),Element.prototype.css=function(a,b){var c,d,e,f,g;if(c=function(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().slice(1)})},d=function(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})},"string"==typeof a){if(null==b)return this.css()[c(a)]||this.css()[d(a)];this.style[c(a)]=b}if("object"==typeof a){for(e in a)g=a[e],this.style[c(e)]=g;return this}if(null==a){a=getComputedStyle(this),f={};for(e in a)g=a[e],isNaN(+e)&&(f[e]=g)}return f},Array.prototype.css=function(){var a,b,c;for(b=0,c=this.length;b<c;b++)a=this[b],a instanceof Element&&a.css.apply(a,arguments);return this},Element.prototype.attr=function(a,b){var c,d;if("object"==typeof a){for(c in a)d=a[c],this.setAttribute(c,d);return this}return null==b?this.getAttribute(a):(this.setAttribute(a,b),this)},Array.prototype.attr=function(){var a,b,c;for(b=0,c=this.length;b<c;b++)a=this[b],a instanceof Element&&a.attr.apply(a,arguments);return this},Element.prototype.clear=function(){for(;this.childNodes.length>0;)this.firstChild.remove();return this},Array.prototype.clear=function(){var a,b,c;for(b=0,c=this.length;b<c;b++)a=this[b],a instanceof Element&&a.clear.apply(a,arguments);return this},Object.defineProperty(Element.prototype,"class",{configurable:!0,get:function(){return this.classList},set:function(){return this.classList}}),Element.prototype.watch=function(a){var b;return null==this._observer&&(this._observer=new MutationObserver(function(a){return function(b){var c,d,e,f,g;for(d=0,f=b.length;d<f;d++)g=b[d],"attributes"===g.type&&(e=["class","id","style","href","src"],c={target:g.target,attr:g.attributeName,oldValue:g.oldValue,value:g.target.attr(g.attributeName)},-1!==e.indexOf(g.attributeName)&&a.emit(g.attributeName+" change",c),a.emit("attr change",c),a.emit("attr:*",c),a.emit("attr:"+g.attributeName,c)),(g.type="childList")&&(g.addedNodes.length>0&&a.emit("child add",{target:g.target,nodes:g.addedNodes}),g.removedNodes.length>0&&a.emit("child remove",{target:g.target,nodes:g.removedNodes})),(g.type="characterData")&&a.emit("text change",{target:g.target,oldValue:g.oldValue,value:g.target.get()});return a}}(this)),b={attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0,subtree:!1},this._observer.observe(this,b)),this},Array.prototype.watch=function(){var a,b,c;for(b=0,c=this.length;b<c;b++)a=this[b],a instanceof Element&&a.watch.apply(a,arguments);return this},Element.prototype.unwatch=function(){return null!=this._observer&&(this._observer.disconnect(),delete this._observer),this},Array.prototype.unwatch=function(){var a,b,c;for(b=0,c=this.length;b<c;b++)a=this[b],a instanceof Element&&a.unwatch.apply(a,arguments);return this},j=n._EventTargets,b=0,e=j.length;b<e;b++)a=j[b],a.prototype.on=function(a,b,c){var d,e,f,g,h,i;for(h=function(){var a,b,c;return a=[].slice.call(arguments),b=a.shift(),c=a.shift(),null!=b.addEventListener?(a.unshift(c),b.addEventListener.apply(b,a)):(a.unshift("on"+c),b.attachEvent.apply(b,a))},a instanceof Array||(a=[a]),i=null!=this.emitter?this.emitter:this,d=null!=this.emitter?this.obj:this,null==i._events&&(i._events={}),null==i._eventsInited&&(i._eventsInited={}),f=0,g=a.length;f<g;f++)e=a[f],null==i._events[e]&&(i._events[e]=[]),i._events[e].push(b),i._eventsInited[e]!==!0&&h(i,e,function(a){var b,c,f,g,h;for(null!=a.waffData&&(a=a.waffData),g=i._events[e],h=[],c=0,f=g.length;c<f;c++)b=g[c],h.push(b.call(d,a));return h},c),i._eventsInited[e]=!0;return i};for(k=n._EventTargets,c=0,f=k.length;c<f;c++)a=k[c],a.prototype.off=function(a,b,c){var d,e,f,g,h;for(a instanceof Array||(a=[a]),h=null!=this.emitter?this.emitter:this,null==h._events&&(h._events={}),f=0,g=a.length;f<g;f++)e=a[f],null==h._events[e]&&(h._events[e]=[]),null==b&&(h._events[e]=[]),(d=function(a){return function(a){var b;if(b=h._events[e].indexOf(a),b!==-1)return h._events[e].splice(b,1),d(a)}}(this))(b);return h};for(l=n._EventTargets,d=0,g=l.length;d<g;d++)a=l[d],a.prototype.once=function(a,b,c){var d,e,f,g,h,i;for(a instanceof Array||(a=[a]),i=null!=this.emitter?this.emitter:this,d=null!=this.emitter?this.obj:this,f=function(a){var e;return e=function(f){return b.call(d,f),i.off(a,e,c)},i.on(a,e,c)},h=0,g=a.length;h<g;h++)e=a[h],f(e);return i};for(m=n._EventTargets,i=0,h=m.length;i<h;i++)a=m[i],a.prototype.emit=function(a,b){var c,d,e;return d=function(){var a,b,c;return a=[].slice.call(arguments),b=a.shift(),c=a.shift(),null!=b.dispatchEvent?(a.unshift(c),b.dispatchEvent.apply(b,a)):(a.unshift("on"+c),b.fireEvent.apply(b,a))},e=null!=this.emitter?this.emitter:this,c=null!=this.emitter?this.obj:this,"string"==typeof a&&(a=new Event(a)),"object"==typeof a&&b&&(a.waffData=b),a.waffThis=c,d(e,a)};return Text.prototype.set=function(a){return this.nodeValue=a,this},Text.prototype.get=function(){return this.nodeValue},n}());