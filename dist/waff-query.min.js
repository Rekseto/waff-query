/*! waff-query v0.5.4 (2016-08-02) | Released under the MIT license */
!function(a,b){var c,d,e;if("undefined"!=typeof module)module.exports=b(),console.log("[waff-query]","nodejs found");else if("function"==typeof define&&"object"==typeof define.amd)define("waff-query",[],b),console.log("[waff-query]","amd found");else{d=b();for(c in d)e=d[c],"version"!==c&&(this[c]=e)}}(null,function(){var a;return a={ps:function(){var a;return a=function(a){var b,c,d,e,f,g,h,i,j,k;if(k=!1,g=!1,j=a||"",e=j.split("."),"."!==j[0]&&(k=e[0]),e.splice(0,1),""===k&&(k=!1),k!==!1&&-1!==k.indexOf("#")&&(c=k.split("#"),k=c[0],g=c[1]),g===!1)for(f=h=0,i=e.length;i>h;f=++h)if(d=e[f],b=d.split("#"),b[1]){g=b[1],e[f]=b[0];break}return{tag:k,id:g,classList:e}}}(),qq:function(){var a;return a=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o;if(b instanceof Array||b instanceof NodeList){for(o=this.ps(a),c=[].slice.call(b),n=[],f=0,i=c.length;i>f;f++)if(e=c[f],l=!0,e instanceof Element){if(l===!0&&o.tag!==!1&&e.tagName.toLowerCase()!==o.tag.toLowerCase()&&(l=!1),l===!0&&o.id!==!1&&e.id!==o.id&&(l=!1),l===!0)for(m=o.classList,g=0,j=m.length;j>g;g++)d=m[g],e.classList.contains(d)||(l=!1);l===!0&&n.push(e)}return n}if(a instanceof Element)return[a];for(b=b instanceof Element?b:document,c=a instanceof NodeList||a instanceof Array?[].slice.call(a):[].slice.call(b.querySelectorAll(a)),n=[],h=0,k=c.length;k>h;h++)e=c[h],e instanceof Element&&n.push(e);return n}}(),q:function(){var a;return a=function(a,b){return this.qq(a,b)[0]||null}}(),e:function(){var a;return a=function(a){var b,c,d,e,f,g;for(g=this.ps(a),c=document.createElement(g.tag||"div"),g.id&&(c.id=g.id),f=g.classList,d=0,e=f.length;e>d;d++)b=f[d],c.classList.add(b);return c}}(),t:function(){var a;return a=function(a){return document.createTextNode(a)}}()},a.selector={parse:a.ps},a.query=a.q,a.q.all=a.qq,a.query.all=a.qq,a.element=a.e,a.text=a.t,a.waff=a,a.waff.version="0.5.4",Element.prototype.qq=function(b){return a.qq(b,this)},Element.prototype.q=function(b){return a.q(b,this)},Element.prototype.query=Element.prototype.q,Element.prototype.query.all=Element.prototype.qq,Element.prototype.q.all=Element.prototype.qq,Element.prototype.append=function(a){return this.appendChild(a),this},Element.prototype.prepend=function(a){return null!=this.firstChild?this.insertBefore(a,this.firstChild):this.append(a),this},Element.prototype.before=function(a){return this.parentElement?(this.parentElement.insertBefore(a,this),this):void 0},Element.prototype.after=function(a){return this.parentElement?(null!=this.nextSibling?this.parentElement.insertBefore(a,this.nextSibling):this.parentElement.append(a),this):void 0},Element.prototype.text=function(b){var c,d,e,f,g,h,i,j,k,l;if(null==b)return this.textContent;for(j=this.childNodes,e=0,g=j.length;g>e;e++)i=j[e],i.remove();if(b instanceof NodeList||b instanceof Array){for(c="",k=[].slice.call(b),f=0,h=k.length;h>f;f++)l=k[f],c+=l instanceof Text?l.get():"string"==typeof l?l:l.toString();return d=a.t(c),this.append(d),d}return b instanceof Text&&(b=b.get()),d=a.t(b),this.append(d),d},Element.prototype.html=function(a){var b,c,d,e,f,g,h,i;if(null==a)return this.innerHTML;for(i=this.childNodes,d=0,f=i.length;f>d;d++)h=i[d],h.remove();if(a instanceof Element)return this.append(a),this;if(a instanceof NodeList||a instanceof Array){for(b=[].slice.call(a),e=0,g=b.length;g>e;e++)c=b[e],(c instanceof Element||c instanceof Text)&&this.append(c);return this}return a instanceof Text&&(a=a.get()),this.innerHTML=a,this},Element.prototype.path=function(){var b,c,d,e;for(e=this,d=[];e.parentNode;){if(""!==e.id){d.unshift("#"+e.id);break}if(e===a.q("html"))d.unshift(e.tagName.toLowerCase());else{for(c=1,b=e;b.previousElementSibling;)b=b.previousElementSibling,c++;d.unshift(e.tagName.toLowerCase()+":nth-child("+c+")")}e=e.parentNode}return d.join(" > ")},Element.prototype.css=function(a,b){var c,d,e,f,g;if(c=function(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().slice(1)})},d=function(a){return a.replace(/([A-Z])/g,function(){return"-"+m.toLowerCase()})},"string"==typeof a){if(null==b)return this.css()[c(a)]||this.css()[d(a)];this.style[c(a)]=b}if("object"==typeof a){for(e in a)g=a[e],this.style[c(e)]=g;return this}if(null==a){a=getComputedStyle(this),f={};for(e in a)g=a[e],isNaN(+e)&&(f[e]=g)}return f},Element.prototype.attr=function(a,b){var c,d;if("object"==typeof a){for(c in a)d=a[c],this.setAttribute(c,d);return this}return null==b?this.getAttribute(a):(this.setAttribute(a,b),this)},Element.prototype.observe=function(){var a;return null==this._observer&&(this._observerHandlers=[],this._observer=new MutationObserver(function(a){return function(b){var c,d,e,f,g,h,i;for(i=a._observerHandlers,d=0,f=i.length;f>d;d++)for(c=i[d],e=0,g=b.length;g>e;e++)h=b[e],c.call(a,h);return a}}(this)),a={attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0},this._observer.observe(this,a)),this},Element.prototype.stopObserving=function(){return null!=this._observer&&(this._observer.disconnect(),delete this._observer),this},EventTarget.prototype.on=function(a,b,c){var d,e;return e=null!=this.emitter?this.emitter:this,d=null!=this.emitter?this.obj:this,null==e._events&&(e._events={}),null==e._eventsInited&&(e._eventsInited={}),null==e._events[a]&&(e._events[a]=[]),e._events[a].push(b),e._eventsInited[a]!==!0&&e.addEventListener(a,function(b){var c,f,g,h,i;for(null!=b.waffData&&(b=b.waffData),h=e._events[a],i=[],f=0,g=h.length;g>f;f++)c=h[f],i.push(c.call(d,b));return i},c),e._eventsInited[a]=!0,e},Element.prototype.on=function(a,b,c){var d;switch(d=EventTarget.prototype.on,a){case"mutation":this._observerHandlers.push(b);break;default:d.apply(this,arguments)}return this},EventTarget.prototype.off=function(a,b,c){var d,e;return e=null!=this.emitter?this.emitter:this,null==e._events&&(e._events={}),null==e._events[a]&&(e._events[a]=[]),null==b&&(e._events[a]=[]),d=function(b){return function(b){var c;return c=e._events[a].indexOf(b),-1!==c?(e._events[a].splice(c,1),d(b)):void 0}}(this),d(b),e},Element.prototype.off=function(a,b,c){var d,e;switch(d=EventTarget.prototype.off,a){case"mutation":e=this._observerHandlers.indexOf(b),-1!==e&&this._observerHandlers.splice(e,1);break;default:d.apply(this,arguments)}return this},EventTarget.prototype.once=function(a,b,c){var d,e,f;return f=null!=this.emitter?this.emitter:this,d=null!=this.emitter?this.obj:this,e=function(f){return b.call(d,f),this.off(a,e,c)},f.on(a,e,c),f},EventTarget.prototype.emit=function(a,b){var c,d;return d=null!=this.emitter?this.emitter:this,c=null!=this.emitter?this.obj:this,"string"==typeof a&&(a=new Event(a)),"object"==typeof a&&b&&(a.waffData=b),a.waffThis=c,d.dispatchEvent(a)},Event.extend=function(a){var b;return b=a._emitter=e(),null==a.on&&(a.on=b.on.bind({emitter:b,obj:a})),null==a.once&&(a.once=b.once.bind({emitter:b,obj:a})),null==a.off&&(a.off=b.off.bind({emitter:b,obj:a})),null==a.dispatchEvent&&(a.dispatchEvent=b.dispatchEvent.bind(b)),null==a.emit&&(a.emit=b.emit.bind({emitter:b,obj:a})),a},Text.prototype.set=function(a){return this.nodeValue=a},Text.prototype.get=function(){return this.nodeValue},a});